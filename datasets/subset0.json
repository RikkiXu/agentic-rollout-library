[
  {
    "instance_id": "jd__tenacity.0d40e76f.pr_484",
    "patch": "diff --git a/tenacity/__init__.py b/tenacity/__init__.py\nindex 72eba04..7d04340 100644\n--- a/tenacity/__init__.py\n+++ b/tenacity/__init__.py\n@@ -339,7 +339,7 @@ class BaseRetrying(ABC):\n             return self.copy(*args, **kwargs).wraps(f)\n \n         # Preserve attributes\n-        wrapped_f.retry = self  # type: ignore[attr-defined]\n+        wrapped_f.retry = wrapped_f  # type: ignore[attr-defined]\n         wrapped_f.retry_with = retry_with  # type: ignore[attr-defined]\n         wrapped_f.statistics = {}  # type: ignore[attr-defined]\n \n@@ -717,4 +717,4 @@ __all__ = [\n     \"Future\",\n     \"RetryCallState\",\n     \"AsyncRetrying\",\n-]\n+]\n\\ No newline at end of file\ndiff --git a/tenacity/asyncio/__init__.py b/tenacity/asyncio/__init__.py\nindex a926091..8a48a87 100644\n--- a/tenacity/asyncio/__init__.py\n+++ b/tenacity/asyncio/__init__.py\n@@ -189,7 +189,7 @@ class AsyncRetrying(BaseRetrying):\n             return await copy(fn, *args, **kwargs)\n \n         # Preserve attributes\n-        async_wrapped.retry = self  # type: ignore[attr-defined]\n+        async_wrapped.retry = async_wrapped  # type: ignore[attr-defined]\n         async_wrapped.retry_with = wrapped.retry_with  # type: ignore[attr-defined]\n         async_wrapped.statistics = {}  # type: ignore[attr-defined]\n \n@@ -203,4 +203,4 @@ __all__ = [\n     \"retry_if_result\",\n     \"WrappedFn\",\n     \"AsyncRetrying\",\n-]\n+]\n\\ No newline at end of file\n",
    "FAIL_TO_PASS": [
      "tests/test_asyncio.py::TestDecoratorWrapper::test_retry_function_attributes",
      "tests/test_tenacity.py::TestDecoratorWrapper::test_retry_function_attributes"
    ],
    "PASS_TO_PASS": [
      "tests/test_after.py::TestAfterLogFormat::test_01_default",
      "tests/test_after.py::TestAfterLogFormat::test_02_custom_sec_format",
      "tests/test_asyncio.py::TestAsyncio::test_attempt_number_is_correct_for_interleaved_coroutines",
      "tests/test_asyncio.py::TestAsyncio::test_iscoroutinefunction",
      "tests/test_asyncio.py::TestAsyncio::test_repr",
      "tests/test_asyncio.py::TestAsyncio::test_retry",
      "tests/test_asyncio.py::TestAsyncio::test_retry_attributes",
      "tests/test_asyncio.py::TestAsyncio::test_retry_preserves_argument_defaults",
      "tests/test_asyncio.py::TestAsyncio::test_retry_using_async_retying",
      "tests/test_asyncio.py::TestAsyncio::test_stop_after_attempt",
      "tests/test_asyncio.py::TestContextManager::test_async_retying_iterator",
      "tests/test_asyncio.py::TestContextManager::test_do_max_attempts",
      "tests/test_asyncio.py::TestContextManager::test_reraise",
      "tests/test_asyncio.py::TestContextManager::test_retry_with_async_exc",
      "tests/test_asyncio.py::TestContextManager::test_retry_with_async_result",
      "tests/test_asyncio.py::TestContextManager::test_retry_with_async_result_and",
      "tests/test_asyncio.py::TestContextManager::test_retry_with_async_result_or",
      "tests/test_asyncio.py::TestContextManager::test_retry_with_async_result_rand",
      "tests/test_asyncio.py::TestContextManager::test_retry_with_async_result_ror",
      "tests/test_asyncio.py::TestContextManager::test_retry_with_result",
      "tests/test_asyncio.py::TestContextManager::test_sleeps",
      "tests/test_issue_478.py::TestIssue478::test_async",
      "tests/test_issue_478.py::TestIssue478::test_issue",
      "tests/test_tenacity.py::TestBase::test_callstate_repr",
      "tests/test_tenacity.py::TestBase::test_retrying_repr",
      "tests/test_tenacity.py::TestStopConditions::test_legacy_explicit_stop_type",
      "tests/test_tenacity.py::TestStopConditions::test_never_stop",
      "tests/test_tenacity.py::TestStopConditions::test_stop_after_attempt",
      "tests/test_tenacity.py::TestStopConditions::test_stop_after_delay",
      "tests/test_tenacity.py::TestStopConditions::test_stop_all",
      "tests/test_tenacity.py::TestStopConditions::test_stop_and",
      "tests/test_tenacity.py::TestStopConditions::test_stop_any",
      "tests/test_tenacity.py::TestStopConditions::test_stop_before_delay",
      "tests/test_tenacity.py::TestStopConditions::test_stop_func_with_retry_state",
      "tests/test_tenacity.py::TestStopConditions::test_stop_or",
      "tests/test_tenacity.py::TestWaitConditions::test_exponential",
      "tests/test_tenacity.py::TestWaitConditions::test_exponential_with_max_wait",
      "tests/test_tenacity.py::TestWaitConditions::test_exponential_with_max_wait_and_multiplier",
      "tests/test_tenacity.py::TestWaitConditions::test_exponential_with_min_wait",
      "tests/test_tenacity.py::TestWaitConditions::test_exponential_with_min_wait_and_multiplier",
      "tests/test_tenacity.py::TestWaitConditions::test_exponential_with_min_wait_andmax__wait",
      "tests/test_tenacity.py::TestWaitConditions::test_fixed_sleep",
      "tests/test_tenacity.py::TestWaitConditions::test_incrementing_sleep",
      "tests/test_tenacity.py::TestWaitConditions::test_legacy_explicit_wait_type",
      "tests/test_tenacity.py::TestWaitConditions::test_no_sleep",
      "tests/test_tenacity.py::TestWaitConditions::test_random_sleep",
      "tests/test_tenacity.py::TestWaitConditions::test_random_sleep_withoutmin_",
      "tests/test_tenacity.py::TestWaitConditions::test_wait_arbitrary_sum",
      "tests/test_tenacity.py::TestWaitConditions::test_wait_chain",
      "tests/test_tenacity.py::TestWaitConditions::test_wait_chain_multiple_invocations",
      "tests/test_tenacity.py::TestWaitConditions::test_wait_combine",
      "tests/test_tenacity.py::TestWaitConditions::test_wait_double_sum",
      "tests/test_tenacity.py::TestWaitConditions::test_wait_exponential_jitter",
      "tests/test_tenacity.py::TestWaitConditions::test_wait_func",
      "tests/test_tenacity.py::TestWaitConditions::test_wait_random_exponential",
      "tests/test_tenacity.py::TestWaitConditions::test_wait_random_exponential_statistically",
      "tests/test_tenacity.py::TestWaitConditions::test_wait_retry_state_attributes",
      "tests/test_tenacity.py::TestWaitConditions::test_wait_triple_sum",
      "tests/test_tenacity.py::TestRetryConditions::test_retry_all",
      "tests/test_tenacity.py::TestRetryConditions::test_retry_and",
      "tests/test_tenacity.py::TestRetryConditions::test_retry_any",
      "tests/test_tenacity.py::TestRetryConditions::test_retry_if_exception_message_negative_no_inputs",
      "tests/test_tenacity.py::TestRetryConditions::test_retry_if_exception_message_negative_too_many_inputs",
      "tests/test_tenacity.py::TestRetryConditions::test_retry_if_not_result",
      "tests/test_tenacity.py::TestRetryConditions::test_retry_if_result",
      "tests/test_tenacity.py::TestRetryConditions::test_retry_or",
      "tests/test_tenacity.py::TestRetryConditions::test_retry_try_again",
      "tests/test_tenacity.py::TestRetryConditions::test_retry_try_again_forever",
      "tests/test_tenacity.py::TestRetryConditions::test_retry_try_again_forever_reraise",
      "tests/test_tenacity.py::TestDecoratorWrapper::test_defaults",
      "tests/test_tenacity.py::TestDecoratorWrapper::test_retry_except_exception_of_type",
      "tests/test_tenacity.py::TestDecoratorWrapper::test_retry_function_object",
      "tests/test_tenacity.py::TestDecoratorWrapper::test_retry_if_exception_cause_type",
      "tests/test_tenacity.py::TestDecoratorWrapper::test_retry_if_exception_message",
      "tests/test_tenacity.py::TestDecoratorWrapper::test_retry_if_exception_message_match",
      "tests/test_tenacity.py::TestDecoratorWrapper::test_retry_if_exception_of_type",
      "tests/test_tenacity.py::TestDecoratorWrapper::test_retry_if_not_exception_message",
      "tests/test_tenacity.py::TestDecoratorWrapper::test_retry_if_not_exception_message_delay",
      "tests/test_tenacity.py::TestDecoratorWrapper::test_retry_if_not_exception_message_match",
      "tests/test_tenacity.py::TestDecoratorWrapper::test_retry_preserves_argument_defaults",
      "tests/test_tenacity.py::TestDecoratorWrapper::test_retry_until_exception_of_type_attempt_number",
      "tests/test_tenacity.py::TestDecoratorWrapper::test_retry_until_exception_of_type_no_type",
      "tests/test_tenacity.py::TestDecoratorWrapper::test_retry_until_exception_of_type_wrong_exception",
      "tests/test_tenacity.py::TestDecoratorWrapper::test_with_stop_on_exception",
      "tests/test_tenacity.py::TestDecoratorWrapper::test_with_stop_on_return_value",
      "tests/test_tenacity.py::TestDecoratorWrapper::test_with_wait",
      "tests/test_tenacity.py::TestRetryWith::test_redefine_wait",
      "tests/test_tenacity.py::TestRetryWith::test_redefine_stop",
      "tests/test_tenacity.py::TestRetryWith::test_retry_error_cls_should_be_preserved",
      "tests/test_tenacity.py::TestRetryWith::test_retry_error_callback_should_be_preserved",
      "tests/test_tenacity.py::TestBeforeAfterAttempts::test_after_attempts",
      "tests/test_tenacity.py::TestBeforeAfterAttempts::test_before_attempts",
      "tests/test_tenacity.py::TestBeforeAfterAttempts::test_before_sleep",
      "tests/test_tenacity.py::TestBeforeAfterAttempts::test_before_sleep_log_raises",
      "tests/test_tenacity.py::TestBeforeAfterAttempts::test_before_sleep_log_raises_with_exc_info",
      "tests/test_tenacity.py::TestBeforeAfterAttempts::test_before_sleep_log_returns",
      "tests/test_tenacity.py::TestBeforeAfterAttempts::test_before_sleep_log_returns_with_exc_info",
      "tests/test_tenacity.py::TestReraiseExceptions::test_reraise_by_default",
      "tests/test_tenacity.py::TestReraiseExceptions::test_reraise_from_retry_error",
      "tests/test_tenacity.py::TestReraiseExceptions::test_reraise_no_exception",
      "tests/test_tenacity.py::TestReraiseExceptions::test_reraise_timeout_from_retry_error",
      "tests/test_tenacity.py::TestStatistics::test_stats",
      "tests/test_tenacity.py::TestStatistics::test_stats_failing",
      "tests/test_tenacity.py::TestRetryErrorCallback::test_retry_error_callback",
      "tests/test_tenacity.py::TestContextManager::test_context_manager_on_error",
      "tests/test_tenacity.py::TestContextManager::test_context_manager_reraise",
      "tests/test_tenacity.py::TestContextManager::test_context_manager_retry_error",
      "tests/test_tenacity.py::TestContextManager::test_context_manager_retry_one",
      "tests/test_tenacity.py::TestInvokeAsCallable::test_retry_one",
      "tests/test_tenacity.py::TestInvokeAsCallable::test_on_error",
      "tests/test_tenacity.py::TestInvokeAsCallable::test_retry_error",
      "tests/test_tenacity.py::TestInvokeAsCallable::test_reraise",
      "tests/test_tenacity.py::TestRetryException::test_retry_error_is_pickleable",
      "tests/test_tenacity.py::TestRetryTyping::test_retry_type_annotations",
      "tests/test_tenacity.py::TestMockingSleep::test_decorated",
      "tests/test_tenacity.py::TestMockingSleep::test_decorated_retry_with",
      "tests/test_tornado.py::TestTornado::test_old_tornado",
      "tests/test_tornado.py::TestTornado::test_repr",
      "tests/test_tornado.py::TestTornado::test_retry",
      "tests/test_tornado.py::TestTornado::test_stop_after_attempt",
      "tests/test_utils.py::test_is_coroutine_callable"
    ],
    "image_name": "iregistry.baidu-int.com/acg-airec/r2e_gym/swe_smith/jyangballin/swesmith.x86_64.jd_1776_tenacity.0d40e76f:latest",
    "repo": "swesmith/jd__tenacity.0d40e76f",
    "problem_statement": "8.4.2 breaks suggested way to overwrite tenacity behaviors on unit tests\nLooks like the change introduced with 8.4.2: https://github.com/jd/tenacity/compare/8.4.1...8.4.2\r\n\r\nBreaks the suggested behavior to overwrite tenacity wait time/retry confiig on tests, as suggested here:\r\n\r\nhttps://github.com/jd/tenacity/issues/106\r\n\r\nDoesn't looks like this was done by propose, is it expected? If yes, what would be the suggested way to ovewrite the retry config in tests to speed it up?\n"
  }
]